#!/bin/bash
#========================================================
#   System Required: CentOS 7+ 
#   Description: 安装脚本
#   Github: https://github.com/
#========================================================
echo "安装依赖--------------------------------------------->"
yum install -y bc bind-utils compat-libcap1 compat-libstdc++-33 glibc-devel ksh libaio-devel libstdc++-devel net-tools nfs-utils psmisc smartmontools sysstat unzip xorg-x11-utils xorg-x11-xauthlibpcap-devel xz-devel
echo "下载------------------------------------------------->"
wget 
# 如果不存在，启用备用下载链接
if [ ! -e "Python-3.6.2.tar.xz" ];then
	echo "下载失败，启用备用链接------------------------------------------------->"
	wget 
else
	echo "存在------------------------------------------------->"
fi
echo "安装------------------------------------------------->"
rpm -ivh oracle-database-preinstall-19c-1.0-1.el7.x86_64.rpm
rpm -ivh oracle-database-preinstall-19c-1.0-1.el7.x86_64.rpm
rpm -ivh oracle-database-ee-19c-1.0-1.x86_64.rpm
echo "初始化------------------------------------------------->"
/etc/init.d/oracledb_ORCLCDB-19c configure
echo "配置系统环境变量------------------------------------------------->"
echo "export ORACLE_BASE=/opt/oracle" >> /etc/profile;
echo "export ORACLE_HOME=/opt/oracle/product/19c/dbhome_1/" >> /etc/profile;
echo "export ORACLE_SID=ORCLCDB" >> /etc/profile;
echo "export PATH=$ORACLE_HOME/bin:$PATH:$HOME/.local/bin:$HOME/bin" >> /etc/profile;
echo "配置软件环境变量------------------------------------------------->"
echo "export PATH" >> /home/oracle/.bash_profile ;
echo "export ORACLE_BASE=/opt/oracle" >> /home/oracle/.bash_profile ;
echo "export ORACLE_HOME=/opt/oracle/product/19c/dbhome_1" >> /home/oracle/.bash_profile ;
echo "export ORACLE_SID=ORCLCDB" >> /home/oracle/.bash_profile ;
echo "export PATH=$ORACLE_HOME/bin:$PATH:$HOME/.local/bin:$HOME/bin" >> /home/oracle/.bash_profile ;
echo "#LANG=C" >> /home/oracle/.bash_profile ;
echo "LANG=zh_CN.UTF-8; export LANG" >> /home/oracle/.bash_profile ;
echo "NLS_LANG="SIMPLIFIED CHINESE_CHINA.al32utf8"; export NLS_LANG" >> /home/oracle/.bash_profile ;
source /etc/profile
source /home/oracle/.bash_profile

tar -xvJf Python-3.6.2.tar.xz
cd Python-3.6.2
./configure --prefix=/usr/local/python3
make && make install
echo "软连接---------------------------------------------->"
ln -s /usr/local/python3/bin/python3 /usr/bin/python3
ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3
echo "安装完成-------------------------------------------->"